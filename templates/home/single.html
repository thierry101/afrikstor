{% extends 'base.html' %}
{% block title %}
    detail {{product.title}} | {{setting.nameSite}}
{% endblock title %}
{% load static %}
{% load spaceNumber %}

{% block content %}


     <!-- Begin Main Content Area  -->
    <main class="main-content">
        <div class="breadcrumb-area breadcrumb-height" data-bg-image="{% static 'images/breadcrumb/bg/1-1-1919x388.jpg' %}">
            <div class="container h-100">
                <div class="row h-100">
                    <div class="col-lg-12">
                        <div class="breadcrumb-item">
                            <h2 class="breadcrumb-heading">Détail sur l'article <br> <h4>{{product.title}}</h4> </h2>
                            <ul>
                                <li>
                                    <a href="{% url 'home:homeIndex' %}">Acceuil</a>
                                </li>
                                <li>Détail sur l'article {{product.title}} </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="single-product-area section-space-top-100">
            <div class="container">
                <div class="row">
                    <div class="col-lg-6">
                        <div class="single-product-img">
                            <div class="swiper-container single-product-slider">
                                <div class="swiper-wrapper">
                                    <div class="swiper-slide">
                                        <a href="{{product.mainImg.url}}" class="single-img gallery-popup">
                                            <img class="img-full" src="{{product.mainImg.url}}" alt="Product Image">
                                        </a>
                                    </div>
                                    {% for img in othersImgs %}
                                    <div class="swiper-slide">
                                        <a href="{{url}}{{img.file}}" class="single-img gallery-popup">
                                            <img class="img-full" src="{{url}}{{img.file}}" alt="Product Image">
                                        </a>
                                    </div>
                                   {% endfor %}
                                </div>
                            </div>
                            <div class="thumbs-arrow-holder">
                                <div class="swiper-container single-product-thumbs">
                                    <div class="swiper-wrapper">
                                        <a href="JavaScript:" class="swiper-slide">
                                            <img class="img-full" src="{{product.mainImg.url}}" alt="Product Thumnail">
                                        </a>
                                        {% for img in othersImgs %}
                                        <a href="JavaScript:" class="swiper-slide">
                                            <img class="img-full" src="{{url}}{{img.file}}" alt="Product Thumnail">
                                        </a>
                                        {% endfor %}
                                    </div>
                                    <!-- Add Arrows -->
                                    <div class=" thumbs-button-wrap d-none d-md-block">
                                        <div class="thumbs-button-prev">
                                            <i class="pe-7s-angle-left"></i>
                                        </div>
                                        <div class="thumbs-button-next">
                                            <i class="pe-7s-angle-right"></i>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-6 pt-5 pt-lg-0">
                        <div class="single-product-content">
                            <input hidden id="idForProduct" type="text" value="{{product.id}}">
                            <h2 class="title">{{product.title}}</h2>
                            <div class="price-box">
                                <span class="new-price">{{product.price |floatformat:0}} Fcfa</span>
                            </div>
                            <div class="rating-box-wrap">
                                <div class="rating-box">
                                    <ul>
                                        <li><i class="fa fa-star"></i></li>
                                        <li><i class="fa fa-star"></i></li>
                                        <li><i class="fa fa-star"></i></li>
                                        <li><i class="fa fa-star"></i></li>
                                        <li><i class="fa fa-star"></i></li>
                                    </ul>
                                </div>
                                <div class="review-status">
                                    <a href="#">( Commentaires {{comments|length}})</a>
                                </div>
                            </div>
                            <div class="selector-wrap color-option">
                                {% if colors %}
                                <span class="selector-title border-bottom-0">Couleurs</span>
                                <select id="colorSelected" value="{{color.name}}" class="nice-select wide border-bottom-0 rounded-0">
                                    {% for color in colors %}
                                    <option value="{{color.name}}">{{color.name}}</option>
                                    {% endfor %}
                                </select>
                                {% endif %}
                            </div>
                            <div class="selector-wrap size-option">
                                {% if sizes %}
                                <span class="selector-title">Tailles</span>
                                <select id="sizeSelected" value="{{size.name}}" class="nice-select wide rounded-0">
                                    {% for size in sizes %}
                                    <option value="{{size.name}}">{{size.name}}</option>
                                    {% endfor %}
                                </select>
                                {% endif %}
                            </div>
                            <!-- <p class="short-desc">Lorem ipsum dolor sit amet, consectetur adipisic elit, sed do eiusmod
                                tempo incid ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostru
                                exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor
                                in reprehenderit in voluptate</p> -->
                            <ul class="quantity-with-btn">
                                <li class="quantity">
                                    <div class="cart-plus-minus">
                                        <input class="cart-plus-minus-box" value="1" type="text">
                                    </div>
                                </li>
                                <!-- <li class="quantity" id="qteProducts">
                                    <div class="cart-plus-minus">
                                        <input class="cart-plus-minus-box" value="1" type="text">
                                    </div>
                                </li> -->
                                <li class="add-to-cart">
                                    <button class="btn btn-custom-size lg-size btn-pronia-primary addCartId">Ajouter au panier</button>
                                </li>
                                
                                <!-- <li class="wishlist-btn-wrap">
                                    <a class="custom-circle-btn" href="wishlist.html">
                                        <i class="pe-7s-like"></i>
                                    </a>
                                </li> -->
                                <!-- <li class="compare-btn-wrap">
                                    <a class="custom-circle-btn" href="compare.html">
                                        <i class="pe-7s-refresh-2"></i>
                                    </a>
                                </li> -->
                            </ul>
                            <ul class="service-item-wrap">
                                <li class="service-item">
                                    <div class="service-img">
                                        <img src="{% static 'images/shipping/icon/car.png' %}" alt="Shipping Icon">
                                    </div>
                                    <div class="service-content">
                                        <span class="title">Free <br> Shipping</span>
                                    </div>
                                </li>
                                <li class="service-item">
                                    <div class="service-img">
                                        <img src="{% static 'images/shipping/icon/card.png' %}" alt="Shipping Icon">
                                    </div>
                                    <div class="service-content">
                                        <span class="title">Safe <br> Payment</span>
                                    </div>
                                </li>
                                <li class="service-item">
                                    <div class="service-img">
                                        <img src="{% static 'images/shipping/icon/service.png' %}" alt="Shipping Icon">
                                    </div>
                                    <div class="service-content">
                                        <span class="title">Safe <br> Payment</span>
                                    </div>
                                </li>
                            </ul>
                            <!-- <div class="product-category">
                                <span class="title">SKU:</span>
                                <ul>
                                    <li>
                                        <a href="#">Ch-256xl</a>
                                    </li>
                                </ul>
                            </div> -->
                            <div class="product-category">
                                <span class="title">Categories :</span>
                                <ul>
                                    <li>
                                        <a href="#">{{product.category.name}},</a>
                                    </li>
                                    <li>
                                        <a href="#">{{product.subCategory.name}}</a>
                                    </li>
                                </ul>
                            </div>
                            <!-- <div class="product-category product-tags">
                                <span class="title">Tags :</span>
                                <ul>
                                    <li>
                                        <a href="#">Furniture</a>
                                    </li>
                                </ul>
                            </div> -->
                            <div class="product-category social-link align-items-center pb-0">
                                <span class="title pe-3">Partager sur:</span>
                                <ul>
                                    <li>
                                        <a href="#" data-tippy="Whatsapp" data-tippy-inertia="true" data-tippy-animation="shift-away" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-theme="sharpborder">
                                            <i class="fa fa-whatsapp"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" data-tippy="Facebook" data-tippy-inertia="true" data-tippy-animation="shift-away" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-theme="sharpborder">
                                            <i class="fa fa-facebook"></i>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#" data-tippy="Messenger" data-tippy-inertia="true" data-tippy-animation="shift-away" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-theme="sharpborder">
                                            <i class="fa fa-messenger"></i>
                                        </a>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="product-tab-area section-space-top-100">
            <div class="container">
                <div class="row">
                    <div class="col-lg-12">
                        <ul class="nav product-tab-nav tab-style-2 pt-0" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="tab-btn" id="information-tab" data-bs-toggle="tab" href="#information" role="tab" aria-controls="information" aria-selected="false">
                                    Information
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="active tab-btn" id="description-tab" data-bs-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="true">
                                    Description
                                </a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="tab-btn" id="reviews-tab" data-bs-toggle="tab" href="#reviews" role="tab" aria-controls="reviews" aria-selected="false">
                                    Commentaires ({{comments|length}})
                                </a>
                            </li>
                        </ul>
                        <div class="tab-content product-tab-content">
                            <div class="tab-pane fade" id="information" role="tabpanel" aria-labelledby="information-tab">
                                <div class="product-information-body">
                                    <h4 class="title">Envoie</h4>
                                    <p class="short-desc mb-4">The item will be shipped from China. So it need 15-20 days to
                                        deliver. Our product is good with reasonable price and we believe you will worth it.
                                        So please wait for it patiently! Thanks.Any question please kindly to contact us and
                                        we promise to work hard to help you to solve the problem</p>
                                    <h4 class="title">A propos des retours</h4>
                                    <p class="short-desc mb-4">If you don't need the item with worry, you can contact us
                                        then we will help you to solve the problem, so please close the return request!
                                        Thanks</p>
                                    <h4 class="title">Garantie</h4>
                                    <p class="short-desc mb-0">If it is the quality question, we will resend or refund to
                                        you; If you receive damaged or wrong items, please contact us and attach some
                                        pictures about product, we will exchange a new correct item to you after the
                                        confirmation.</p>
                                </div>
                            </div>
                            <div class="tab-pane fade show active" id="description" role="tabpanel" aria-labelledby="description-tab">
                                <div class="product-description-body">
                                    <p class="short-desc mb-0">
                                        {{product.description|safe}}
                                    </p>
                                </div>
                            </div>
                            <div class="tab-pane fade" id="reviews" role="tabpanel" aria-labelledby="reviews-tab">
                                <div class="product-review-body">
                                    <div class="blog-comment mt-0">
                                        <h4 class="heading">Commentaires ({{comments|length}})</h4>
                                        {% for comment in comments %}
                                        <div class="blog-comment-item">
                                            <div class="blog-comment-img">
                                                <img src="{% static 'images/blog/avatar/1-1-120x120.png' %}" alt="User Image">
                                            </div>
                                            <div class="blog-comment-content">
                                                <div class="user-meta">
                                                    <h2 class="user-name">{{comment.user.last_name}} {{comment.user.first_name}}</h2>
                                                    <span class="date">{{comment.timestamp|date:"d, M, Y"}}</span>
                                                </div>
                                                <p class="user-comment">{{comment.message}} </p>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                    {% if user.is_authenticated %}
                                    <div class="feedback-area">
                                        <h2 class="heading">Donner votre avis</h2>
                                        <form class="feedback-form" action="#">
                                            <div class="form-field mt-30">
                                                <textarea id="commentProd" name="message" placeholder="Votre commentaire" class="textarea-field form-control"></textarea>
                                            </div>
                                            <div id="errorMsgProd" class="text-danger text-center">
                                            </div>
                                            <div class="button-wrap pt-5">
                                                <button id="submitCommentProd" type="submit" value="submit" class="btn btn-custom-size xl-size btn-pronia-primary" name="submit">Poster</button>
                                            </div>
                                        </form>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Begin Product Area -->
        <div class="product-area section-space-y-axis-90">
            <div class="container">
                <div class="row">
                    <div class="section-title-wrap without-tab">
                        <h2 class="section-title">Articles semblables</h2>
                    </div>
                    <div class="col-lg-12">
                        <div class="swiper-container product-slider">
                            <div class="swiper-wrapper">
                                {% for related_prod in related_products %}
                                <!-- <div class="col-6"> -->
                                <div class="swiper-slide product-item">
                                    <div class="product-img">
                                        <a href="{% url 'home:detailProd' related_prod.id %}">
                                            <img width="270px" height="300px" class="primary-img" src="{{related_prod.mainImg.url}}" alt="Product Images">
                                            <img width="270px" height="300px" class="secondary-img" src="{{path}}{{related_prod.secondImg}}" alt="Product Images">
                                        </a>
                                        <div class="product-add-action">
                                            <ul>
                                                {% if request.user.is_authenticated %}
                                                <li>
                                                    <a id="{{product.id}}" class="addWishListNew" href="wishlist.html" data-tippy="Ajouter à la liste de souhait" data-tippy-inertia="true" data-tippy-animation="shift-away" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-theme="sharpborder">
                                                        <i id="{{product.id}}" class="pe-7s-like"></i>
                                                    </a>
                                                </li>
                                                {% endif %}
                                                <li>
                                                    <a class="addCartNewProd" id="{{related_prod.id}}" href="cart.html" data-tippy="Ajouter au panier" data-tippy-inertia="true" data-tippy-animation="shift-away" data-tippy-delay="50" data-tippy-arrow="true" data-tippy-theme="sharpborder">
                                                        <i id="{{related_prod.id}}" class="pe-7s-cart"></i>
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                    <div class="product-content">
                                        <a class="product-name" href="{% url 'home:detailProd' related_prod.id %}">{{related_prod.title}}</a>
                                        <div class="price-box pb-1">
                                            <span class="new-price">{{related_prod.price | floatformat:0 | intspace}} Fcfa</span>
                                        </div>
                                        <div class="rating-box">
                                            <ul>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                                <li><i class="fa fa-star"></i></li>
                                            </ul>
                                        </div>
                                    </div>
                                <!-- </div> -->
                            </div>
                                {% endfor %}
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Product Area End Here -->

    </main>
    <!-- Main Content Area End Here  -->






{% endblock content %}